<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>三国时期长江流域地图 - 江东、江西、江南</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 0;
            background-color: #f5f5f5;
            color: #333;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 10px;
            font-size: 2.2em;
        }
        .subtitle {
            text-align: center;
            color: #7f8c8d;
            margin-bottom: 30px;
            font-size: 1.1em;
        }
        .content-section {
            background-color: #fff;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            padding: 25px;
        }
        .book-info {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .book-info h3 {
            margin-top: 0;
            color: #2c3e50;
            font-size: 1.3em;
        }
        .book-info p {
            margin: 5px 0;
        }
        #interactive-map {
            height: 600px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.15);
            margin-bottom: 25px;
        }
        .map-legend {
            background-color: white;
            padding: 18px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.15);
            margin-bottom: 25px;
            font-size: 14px;
        }
        .map-legend h3 {
            margin-top: 0;
            color: #2c3e50;
            font-size: 1.3em;
            margin-bottom: 15px;
        }
        .legend-item {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            line-height: 1.5;
        }
        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
            margin-right: 10px;
        }
        .info-card {
            background-color: #e8f4f8;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 5px solid #3498db;
        }
        .info-card h4 {
            margin-top: 0;
            color: #2980b9;
        }
        .info-card p {
            margin: 5px 0;
        }
        .river-path {
            stroke: #3498db;
            stroke-width: 4;
            stroke-dasharray: 5, 5;
        }
        .major-city {
            font-weight: bold;
            color: #e74c3c;
            font-size: 14px;
            text-align: center;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-shadow: 0 1px 3px rgba(255,255,255,0.9);
            background-color: rgba(255,255,255,0.8);
            padding: 2px 6px;
            border-radius: 4px;
        }
        .info-popup {
            max-width: 300px;
        }
        .info-popup h3 {
            margin-top: 0;
            color: #2c3e50;
            font-size: 1.2em;
            margin-bottom: 10px;
            border-bottom: 2px solid #3498db;
            padding-bottom: 5px;
        }
        .info-popup h4 {
            margin: 12px 0 6px 0;
            color: #34495e;
            font-size: 1em;
        }
        .info-popup p {
            margin: 0 0 8px 0;
            line-height: 1.6;
            font-size: 0.95em;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>三国时期长江流域地图</h1>
        <div class="subtitle">江东、江西、江南区域划分</div>

        <div class="content-section">
            <div class="book-info">
                <h3>区域说明</h3>
                <p><strong>江东 (Dongjiang)</strong>：指长江下游以东地区，即今江苏南部、浙江一带，为孙吴政权核心区域</p>
                <p><strong>江西 (Jiangxi)</strong>：指长江以西地区，以豫章郡（南昌）为核心，包括今江西大部</p>
                <p><strong>江南 (Jiangnan)</strong>：广义指长江以南地区，狭义指今长江中下游南岸地区</p>
            </div>

            <div class="info-card">
                <h4>历史背景</h4>
                <p>• 三国时期，长江流域是魏蜀吴三国争夺的重要区域</p>
                <p>• 孙吴政权据守江东，以长江为天险，与曹魏对峙</p>
                <p>• 江东六郡：吴郡、会稽郡、丹阳郡、豫章郡、庐陵郡、庐江郡</p>
                <p>• 长江在此时期具有重要的军事战略意义</p>
            </div>

            <h3>三国时期长江流域地理图</h3>
            <div id="interactive-map"></div>

            <div class="map-legend">
                <h3>地图图例</h3>
                <div class="legend-item" id="legend-jiangdong" style="cursor: pointer;">
                    <div class="legend-color" style="background-color: rgba(231, 76, 60, 0.6);"></div>
                    <span>江东 (Dongjiang) - 孙吴政权核心区域</span>
                </div>
                <div class="legend-item" id="legend-jiangxi" style="cursor: pointer;">
                    <div class="legend-color" style="background-color: rgba(52, 152, 219, 0.6);"></div>
                    <span>江西 (Jiangxi) - 豫章郡等区域</span>
                </div>
                <div class="legend-item" id="legend-jiangnan" style="cursor: pointer;">
                    <div class="legend-color" style="background-color: rgba(46, 204, 113, 0.6);"></div>
                    <span>江南 (Jiangnan) - 广义长江以南地区</span>
                </div>
                <div class="legend-item" id="legend-river" style="cursor: pointer;">
                    <div class="legend-color" style="background-color: rgba(241, 196, 15, 0.8); border: 1px solid #d35400;"></div>
                    <span>长江水道</span>
                </div>
                <div class="legend-item" id="legend-city" style="cursor: pointer;">
                    <div class="legend-color" style="background-color: rgba(155, 89, 182, 0.8);"></div>
                    <span>重要城市</span>
                </div>
            </div>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        // 初始化地图
        const map = L.map('interactive-map').setView([30.5, 118.5], 7);

        // 添加底图
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);

        // 江东区域坐标（精确到江东六郡范围）
        const jiangdongCoordinates = [
            [32.0, 118.0], [32.0, 122.0], [30.0, 122.0], [30.0, 121.0], [29.5, 120.5], [29.0, 120.0], 
            [28.5, 119.0], [28.0, 118.0], [30.0, 117.0], [31.0, 117.0], [32.0, 118.0]
        ];

        // 江西区域坐标（三国时期豫章郡等区域范围）
        const jiangxiCoordinates = [
            [29.0, 115.0], [30.0, 117.0], [27.0, 117.0], [26.0, 116.0], [26.0, 114.0], [28.0, 114.0], [29.0, 115.0]
        ];

        // 江南区域坐标（长江中下游南岸区域，覆盖江东但突出江南概念）
        const jiangnanCoordinates = [
            [32.0, 118.0], [31.5, 119.0], [31.0, 120.0], [30.5, 120.5], [30.0, 120.0], [29.5, 119.5], 
            [29.0, 119.0], [28.5, 118.0], [28.0, 117.0], [27.5, 116.0], [27.0, 115.0], [27.0, 114.0], 
            [28.0, 114.0], [29.0, 115.0], [30.0, 116.0], [31.0, 117.0], [32.0, 118.0]
        ];

        // 长江河道坐标（重点突出三国时期重要的江段）
        const yangtzeRiverPath = [
            [29.5, 112.0], [29.6, 112.5], [29.7, 113.0], [29.8, 113.5], [29.7, 114.0], 
            [29.6, 114.5], [29.5, 115.0], [29.4, 115.5], [29.3, 116.0], [29.2, 116.5], 
            [29.1, 117.0], [29.0, 117.5], [28.9, 118.0], [28.8, 118.5], [28.7, 119.0], 
            [28.6, 119.5], [28.5, 120.0], [28.4, 120.5], [28.3, 121.0], [28.2, 121.5]
        ];

        // 创建独立的图层组
        const jiangdongLayer = L.layerGroup();
        const jiangxiLayer = L.layerGroup();
        const jiangnanLayer = L.layerGroup();
        const riverLayer = L.layerGroup();
        const cityLayer = L.layerGroup();

        // 添加江东区域
        const jiangdongPolygon = L.polygon(jiangdongCoordinates, {
            color: '#c0392b',
            fillColor: '#e74c3c',
            fillOpacity: 0.5,
            weight: 3,
            opacity: 0.9
        }).bindPopup(`
            <div class="info-popup">
                <h3>江东 (Dongjiang)</h3>
                <h4>地理范围</h4>
                <p>三国时期江东六郡区域，长江下游南岸，大致包括今江苏南部、浙江北部、安徽东南部</p>
                <h4>行政区域</h4>
                <p>三国时期属孙吴管辖，主要包括江东六郡：</p>
                <p>• 吴郡（治所在今苏州）</p>
                <p>• 会稽郡（治所在今绍兴）</p>
                <p>• 丹阳郡（治所在今南京）</p>
                <p>• 豫章郡（治所在今南昌）</p>
                <p>• 庐陵郡（治所在今吉安）</p>
                <p>• 庐江郡（治所在今庐江）</p>
                <h4>历史意义</h4>
                <p>孙吴政权的核心根据地，经济发达，人口稠密，为吴国提供了重要的人力物力支持。</p>
            </div>
        `);

        // 添加江西区域
        const jiangxiPolygon = L.polygon(jiangxiCoordinates, {
            color: '#2980b9',
            fillColor: '#3498db',
            fillOpacity: 0.5,
            weight: 3,
            opacity: 0.9
        }).bindPopup(`
            <div class="info-popup">
                <h3>江西 (Jiangxi)</h3>
                <h4>地理范围</h4>
                <p>长江中下游西岸、赣江流域为中心的区域，大致包括今江西省大部</p>
                <h4>行政区域</h4>
                <p>三国时期属孙吴管辖，主要包括：</p>
                <p>• 豫章郡（治所在今南昌）</p>
                <p>• 庐陵郡（治所在今吉安）</p>
                <p>• 九江郡部分地区</p>
                <h4>历史意义</h4>
                <p>重要的农业区和战略要地，豫章郡是长江中游的重要城市，控制着南北交通要道。</p>
            </div>
        `);

        // 添加江南区域（强调文化地理概念）
        const jiangnanPolygon = L.polygon(jiangnanCoordinates, {
            color: '#27ae60',
            fillColor: '#2ecc71',
            fillOpacity: 0.4,
            weight: 2,
            opacity: 0.8
        }).bindPopup(`
            <div class="info-popup">
                <h3>江南 (Jiangnan)</h3>
                <h4>地理范围</h4>
                <p>长江中下游以南的广阔区域，包括今江苏南部、浙江、江西、湖南、安徽南部等</p>
                <h4>文化意义</h4>
                <p>自三国时期开始逐渐发展，至唐宋后成为中国主要的经济文化中心</p>
                <h4>历史发展</h4>
                <p>三国时期是江南开发的重要阶段，孙吴政权促进了该地区的农业、手工业和商业发展</p>
            </div>
        `);

        // 绘制长江河道
        const yangtzeRiver = L.polyline(yangtzeRiverPath, {
            color: '#f39c12',
            weight: 8,
            opacity: 0.7,
            dashArray: '10, 8'
        }).bindPopup(`
            <div class="info-popup">
                <h3>长江水道</h3>
                <h4>地理特征</h4>
                <p>中国第一大河，东西横贯，是南北交通的重要通道</p>
                <h4>军事战略意义</h4>
                <p>三国时期，长江是魏吴对峙的天然分界线，具有重要的军事战略价值</p>
                <p>吴国凭借长江天险，长期与曹魏对峙</p>
                <h4>经济交通价值</h4>
                <p>长江是重要的水运通道，促进了沿岸地区的经济交流与发展</p>
            </div>
        `);

        // 将图层添加到对应图层组
        jiangdongLayer.addLayer(jiangdongPolygon);
        jiangxiLayer.addLayer(jiangxiPolygon);
        jiangnanLayer.addLayer(jiangnanPolygon);
        riverLayer.addLayer(yangtzeRiver);

        // 添加重要城市标记
        const cities = [
            { name: '建业', location: [32.0603, 118.7969], desc: '<div class="info-popup"><h3>建业 (今南京)</h3><h4>政治地位</h4><p>孙吴政权都城，江东地区的政治中心</p><h4>历史意义</h4><p>孙权于229年在此称帝，建立吴国，是三国时期的重要都城</p><p>凭借长江天险，成为抵御曹魏南侵的重要屏障</p></div>' },
            { name: '九江', location: [29.7031, 116.0186], desc: '<div class="info-popup"><h3>九江</h3><h4>地理位置</h4><p>长江重要渡口和军事要地，连接江东西部与江南的交通要道</p><h4>历史意义</h4><p>三国时期是重要的军事据点，控制长江水道交通</p></div>' },
            { name: '南昌', location: [28.6825, 115.8581], desc: '<div class="info-popup"><h3>南昌（豫章）</h3><h4>行政地位</h4><p>豫章郡治所，江西地区的政治经济中心</p><h4>历史意义</h4><p>三国时期属孙吴管辖，是长江中游的重要城市</p><p>控制赣江水道，是联系长江与岭南地区的重要节点</p></div>' },
            { name: '苏州', location: [31.2989, 120.5853], desc: '<div class="info-popup"><h3>苏州（吴郡）</h3><h4>经济地位</h4><p>江东六郡之一，重要的经济文化中心</p><h4>历史意义</h4><p>孙吴政权的重要基地，经济发达，人口稠密</p><p>是江南地区重要的手工业和商业中心</p></div>' },
            { name: '绍兴', location: [30.0303, 120.5657], desc: '<div class="info-popup"><h3>绍兴（会稽）</h3><h4>文化地位</h4><p>江东六郡之一，重要的政治文化中心</p><h4>历史意义</h4><p>三国时期文化发达，是江南地区的重要城市</p><p>拥有丰富的历史文化遗产</p></div>' },
            { name: '武昌', location: [30.5436, 114.4025], desc: '<div class="info-popup"><h3>武昌</h3><h4>军事地位</h4><p>长江中游重要军事据点，孙吴政权的军事重镇</p><h4>历史意义</h4><p>控制长江中游水道，是吴国防御魏国的重要前沿阵地</p></div>' }
        ];

        cities.forEach(city => {
            const marker = L.marker(city.location, {
                icon: L.divIcon({
                    className: 'city-marker',
                    html: `<div class="major-city">${city.name}</div>`,
                    iconSize: [0, 0],
                    iconAnchor: [0, 0]
                })
            }).bindPopup(city.desc);
            cityLayer.addLayer(marker);
        });

        // 将所有图层组添加到地图
        jiangdongLayer.addTo(map);
        jiangxiLayer.addTo(map);
        jiangnanLayer.addTo(map);
        riverLayer.addTo(map);
        cityLayer.addTo(map);

        // 添加悬停效果
        [jiangdongPolygon, jiangxiPolygon, jiangnanPolygon, yangtzeRiver].forEach(layer => {
            layer.on('mouseover', function (e) {
                this.setStyle({
                    fillOpacity: 0.7,
                    weight: 10
                });
                this.bringToFront();
            });

            layer.on('mouseout', function (e) {
                if (this instanceof L.Polygon) {
                    this.setStyle({
                        fillOpacity: (this.options.fillColor === '#e74c3c') ? 0.5 : 0.4,
                        weight: (this.options.fillColor === '#e74c3c') ? 3 : 2
                    });
                } else if (this instanceof L.Polyline) {
                    this.setStyle({
                        opacity: 0.7,
                        weight: 8
                    });
                }
            });
        });

        // 添加图例点击切换功能
        function setupLegendToggle() {
            // 江东图例点击事件
            const jiangdongLegend = document.getElementById('legend-jiangdong');
            jiangdongLegend.addEventListener('click', function() {
                if (map.hasLayer(jiangdongLayer)) {
                    map.removeLayer(jiangdongLayer);
                    this.style.opacity = '0.5';
                    this.style.textDecoration = 'line-through';
                } else {
                    map.addLayer(jiangdongLayer);
                    this.style.opacity = '1';
                    this.style.textDecoration = 'none';
                }
            });

            // 江西图例点击事件
            const jiangxiLegend = document.getElementById('legend-jiangxi');
            jiangxiLegend.addEventListener('click', function() {
                if (map.hasLayer(jiangxiLayer)) {
                    map.removeLayer(jiangxiLayer);
                    this.style.opacity = '0.5';
                    this.style.textDecoration = 'line-through';
                } else {
                    map.addLayer(jiangxiLayer);
                    this.style.opacity = '1';
                    this.style.textDecoration = 'none';
                }
            });

            // 江南图例点击事件
            const jiangnanLegend = document.getElementById('legend-jiangnan');
            jiangnanLegend.addEventListener('click', function() {
                if (map.hasLayer(jiangnanLayer)) {
                    map.removeLayer(jiangnanLayer);
                    this.style.opacity = '0.5';
                    this.style.textDecoration = 'line-through';
                } else {
                    map.addLayer(jiangnanLayer);
                    this.style.opacity = '1';
                    this.style.textDecoration = 'none';
                }
            });

            // 长江图例点击事件
            const riverLegend = document.getElementById('legend-river');
            riverLegend.addEventListener('click', function() {
                if (map.hasLayer(riverLayer)) {
                    map.removeLayer(riverLayer);
                    this.style.opacity = '0.5';
                    this.style.textDecoration = 'line-through';
                } else {
                    map.addLayer(riverLayer);
                    this.style.opacity = '1';
                    this.style.textDecoration = 'none';
                }
            });

            // 城市图例点击事件
            const cityLegend = document.getElementById('legend-city');
            cityLegend.addEventListener('click', function() {
                if (map.hasLayer(cityLayer)) {
                    map.removeLayer(cityLayer);
                    this.style.opacity = '0.5';
                    this.style.textDecoration = 'line-through';
                } else {
                    map.addLayer(cityLayer);
                    this.style.opacity = '1';
                    this.style.textDecoration = 'none';
                }
            });
            
            // 初始化图例状态样式
            jiangdongLegend.style.textDecoration = 'none';
            jiangxiLegend.style.textDecoration = 'none';
            jiangnanLegend.style.textDecoration = 'none';
            riverLegend.style.textDecoration = 'none';
            cityLegend.style.textDecoration = 'none';
        }

        // 地图加载完成后设置图例功能
        map.whenReady(setupLegendToggle);
    </script>
</body>
</html>