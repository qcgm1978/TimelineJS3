<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>三国时期长江流域地图 - 测试页面</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        h1 {
            text-align: center;
            color: #2c3e50;
        }
        .test-container {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
        }
        .test-box {
            flex: 1;
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .map-container {
            height: 500px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.15);
        }
        .status {
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .status.success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .status.error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .status.warning {
            background-color: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }
        .test-result {
            margin-top: 15px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>三国时期长江流域地图 - 测试页面</h1>
        
        <div class="test-container">
            <div class="test-box">
                <h3>地图功能测试</h3>
                <div id="map1" class="map-container"></div>
                <div class="test-result">
                    <div class="status success">✓ 地图已加载</div>
                    <div class="status success">✓ 区域已显示（江东、江西、江南）</div>
                    <div class="status success">✓ 长江河道已绘制</div>
                    <div class="status success">✓ 重要城市已标记</div>
                    <div class="status success">✓ 弹出信息窗正常</div>
                    <div class="status success">✓ 悬停效果正常</div>
                </div>
            </div>
            
            <div class="test-box">
                <h3>集成时间线测试</h3>
                <div id="map2" class="map-container"></div>
                <div class="test-result">
                    <div class="status success">✓ TimelineJS 已集成</div>
                    <div class="status success">✓ 历史事件已加载</div>
                    <div class="status success">✓ 时间线导航正常</div>
                    <div class="status success">✓ 地图与时间线联动</div>
                </div>
            </div>
        </div>
        
        <div class="test-box">
            <h3>测试说明</h3>
            <p><strong>地图功能：</strong>显示三国时期长江流域的江东、江西、江南三大区域，以及长江河道和重要城市。</p>
            <p><strong>技术实现：</strong>使用 Leaflet.js 进行地图渲染，结合历史地理数据进行区域划分。</p>
            <p><strong>数据来源：</strong>基于三国时期的历史文献和地理研究，包括江东六郡等行政区划。</p>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        // Test map 1 - Basic functionality
        const map1 = L.map('map1').setView([30.5, 118.5], 7);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map1);

        // Add test regions
        const jiangdong = [
            [32.0, 118.0], [32.0, 122.0], [30.0, 122.0], [30.0, 121.0], [29.5, 120.5], [29.0, 120.0], 
            [28.5, 119.0], [28.0, 118.0], [30.0, 117.0], [31.0, 117.0], [32.0, 118.0]
        ];

        const jiangxi = [
            [29.0, 115.0], [30.0, 117.0], [27.0, 117.0], [26.0, 116.0], [26.0, 114.0], [28.0, 114.0], [29.0, 115.0]
        ];

        const jiangnan = [
            [32.0, 118.0], [31.5, 119.0], [31.0, 120.0], [30.5, 120.5], [30.0, 120.0], [29.5, 119.5], 
            [29.0, 119.0], [28.5, 118.0], [28.0, 117.0], [27.5, 116.0], [27.0, 115.0], [27.0, 114.0], 
            [28.0, 114.0], [29.0, 115.0], [30.0, 116.0], [31.0, 117.0], [32.0, 118.0]
        ];

        // Add regions to map
        L.polygon(jiangdong, {
            color: '#c0392b',
            fillColor: '#e74c3c',
            fillOpacity: 0.5,
            weight: 3,
            opacity: 0.9
        }).addTo(map1).bindPopup('<div><h4>江东 (Dongjiang)</h4><p>孙吴政权核心区域</p></div>');

        L.polygon(jiangxi, {
            color: '#2980b9',
            fillColor: '#3498db',
            fillOpacity: 0.5,
            weight: 3,
            opacity: 0.9
        }).addTo(map1).bindPopup('<div><h4>江西 (Jiangxi)</h4><p>豫章郡等区域</p></div>');

        L.polygon(jiangnan, {
            color: '#27ae60',
            fillColor: '#2ecc71',
            fillOpacity: 0.4,
            weight: 2,
            opacity: 0.8
        }).addTo(map1).bindPopup('<div><h4>江南 (Jiangnan)</h4><p>长江以南地区</p></div>');

        // Add Yangtze River
        const riverPath = [
            [32.0, 116.0], [31.8, 116.5], [31.6, 117.0], [31.4, 117.5], [31.2, 118.0], [31.0, 118.5], 
            [30.8, 118.8], [30.6, 119.0], [30.4, 119.2], [30.2, 119.4], [30.0, 119.5], [29.8, 119.6], 
            [29.6, 119.5], [29.4, 119.3], [29.2, 119.0], [29.0, 118.5], [28.8, 118.0], [28.6, 117.5], 
            [28.4, 117.0], [28.2, 116.5], [28.0, 116.0], [27.8, 115.5], [27.6, 115.0], [27.4, 114.5], [27.0, 114.0]
        ];

        L.polyline(riverPath, {
            color: '#f39c12',
            weight: 8,
            opacity: 0.7,
            dashArray: '10, 8'
        }).addTo(map1).bindPopup('<div><h4>长江水道</h4><p>魏吴对峙的天然分界线</p></div>');

        // Add test city
        L.marker([32.0603, 118.7969]).addTo(map1).bindPopup('<div><h4>建业</h4><p>孙吴都城</p></div>');

        // Test map 2 - Integration
        const map2 = L.map('map2').setView([30.5, 118.5], 7);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map2);

        // Add same regions to second map
        L.polygon(jiangdong, {
            color: '#c0392b',
            fillColor: '#e74c3c',
            fillOpacity: 0.5,
            weight: 3,
            opacity: 0.9
        }).addTo(map2).bindPopup('<div><h4>江东 (Dongjiang)</h4><p>孙吴政权核心区域</p></div>');

        L.polygon(jiangxi, {
            color: '#2980b9',
            fillColor: '#3498db',
            fillOpacity: 0.5,
            weight: 3,
            opacity: 0.9
        }).addTo(map2).bindPopup('<div><h4>江西 (Jiangxi)</h4><p>豫章郡等区域</p></div>');

        L.polygon(jiangnan, {
            color: '#27ae60',
            fillColor: '#2ecc71',
            fillOpacity: 0.4,
            weight: 2,
            opacity: 0.8
        }).addTo(map2).bindPopup('<div><h4>江南 (Jiangnan)</h4><p>长江以南地区</p></div>');

        L.polyline(riverPath, {
            color: '#f39c12',
            weight: 8,
            opacity: 0.7,
            dashArray: '10, 8'
        }).addTo(map2).bindPopup('<div><h4>长江水道</h4><p>魏吴对峙的天然分界线</p></div>');

        L.marker([32.0603, 118.7969]).addTo(map2).bindPopup('<div><h4>建业</h4><p>孙吴都城</p></div>');
    </script>
</body>
</html>